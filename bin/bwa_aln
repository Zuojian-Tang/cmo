#!/opt/common/CentOS_6-dev/python/python-2.7.10/bin/python

import argparse, os, sys, re, subprocess,itertools
import mskcmo

def parse_bwa_help(bwa_cmd):
    bwa_help = subprocess.Popen(bwa_cmd,stderr=subprocess.PIPE,shell=True).communicate()[1]
    valid_args = re.findall(r"(-\w) ([\S \t]+\n)?", bwa_help, re.M)
    return dict(valid_args[:-1])

if __name__ =='__main__':
    parser = argparse.ArgumentParser(description="run bwa aln")
    args_dict = parse_bwa_help(mskcmo.util.programs['bwa']['default'] + " aln")
    for arg, description in args_dict.items():
        parser.add_argument(arg, dest=arg[1:],action="store", help=description)
    parser.parse_args()

